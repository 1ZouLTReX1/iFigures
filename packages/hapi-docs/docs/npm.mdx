---
id: npm
title: NPM = Node Package Manager
sidebar_label: NPM
---


This page is pretty much essential to read if you don't know the basics of NPM, nor the package ecosystem
in JavaScript.

![npm logo](assets/npm-logo.png)

NPM is a package managing tool that lets developers share code between projects.

It consists of a command-line program, and an online database of packages
called the NPM registry ([npmjs.com](https://npmjs.com)).

NPM is the 1<sup>st</sup> most popular package manager for JavaScript today,
with [yarn](https://yarnpkg.com/) being the 2<sup>nd</sup> most popular
(yarn is developed and maintained by Facebook, but it still uses the npm registry).

NPM is shipped with [Node](https://nodejs.org/en/) (A JavaScript runtime engine) by default.

It is very much like the pip module and the [PyPI](https://pypi.org/) registry in Python.

## [Installing NPM](installation#installing-npm)

## Initializing a package

:::tip
A directory is considered a package when it has a **`package.json`** file in it.
:::

To create a package, initialize a new directory
(replace "new-package" with the package name you want to create):

```bash
mkdir new-package
```

Navigate inside it:

```bash
cd new-package
```

And use NPM to create the `config.json` file for you:

```bash
npm init
```

NPM will ask you questions about what information to fill in your `package.json`.
If there is a default answer, it will be in parentheses. Press enter to accept it.

```json title="package.json"
{
  "name": "new-package",
  "version": "0.1.0",
  "description": "A new package created with NPM init",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Daniel",
  "license": "ISC"
}
```

All of this basic information is optional, but it helps identify your package
if it's ever published to the NPM registry.

## Adding dependencies

Your package can require other packages from the NPM registry.

For example, we've just decided that we need `express` in our package
(It is a package for creating web applications and servers).

To add `express` at its latest version, run:

```bash
npm install express
```

This will do two things:

* Install `express` locally, in the `node_modules` folder
* Add `express` to the list of dependencies in `package.json`:

```json title="package.json" {11-13}
{
  "name": "new-package",
  "version": "0.1.0",
  "description": "A new package created with NPM init",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Daniel",
  "license": "ISC",
  "dependencies": {
    "express": "^4.17.1"
  }
}
```

This `dependencies` property tells NPM which dependencies are essential for this package
to work properly (and in what version), i.e. what this package **depends on**.

If someone else were to install our package, `express` will be installed with it,
because it depends on it.

By the way, `express` also has its dependencies (which are installed in `node_modules`),
but we don't see them here because we don't directly use them.

:::note
When using `npm install`, dependencies are installed **locally, per package**
(In contrast to PIP in Python, which installs modules globally).

If you want a package from NPM to be installed globally
(generally not recommended, except for command line tools),
you should use `npm install --global` or `npm i -G`.
:::

This caret in the version specification (`^4.17.1`) means
that when installing this dependency, NPM will try to find the highest **minor** version
for `express` (the highest version that starts with `4.x.x`).
[More info](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#dependencies)

### `package-lock.json`

You may have noticed that NPM has also created **`package-lock.json`**.
This file is automatically generated, and it shouldn't be modified by anyone except NPM.
This file simply holds the 'tree' of dependencies for all the packages that our package requires.
This helps NPM install dependencies faster when installed in new environments.
[More info](https://docs.npmjs.com/cli/v7/configuring-npm/package-lock-json)

## NPM Scripts

NPM offers a way to configure and run custom commands in our package.
It involves the `npm run <script>` command and the `script` property inside `package.json`.

Let's say that we've created a simple HTTP server in our package:

![New file in our package: `server.js`](assets/npm-new-package-server.png)

```js title="server.js"
const express = require('express');
const app = express();
const port = 3000;

app.get('/', (req, res) => {
  res.send('Hello World!')
});

app.listen(port, () => {
  console.log(`Example app listening at http://localhost:${port}`)
});
```

Let's run it with Node:

```bash
$ node server.js

Example app listening at http://localhost:3000
```

Then see the result in the browser:

import BrowserWindow from '../src/components/BrowserWindow';

<BrowserWindow url="http://localhost:3000">

Hello World!

</BrowserWindow>
<br />

However, it's considered a best practice to create an NPM script for running our package.
That way, the command itself can change, but the script is used the same.
These NPM scripts are essentially command-line shortcuts, and they enable integration with most of the text editors
and IDEs in use today.

Let's add this line to our `package.json`:

```json title="package.json {7}
{
  "name": "new-package",
  "version": "0.1.0",
  "description": "A new package created with NPM init",
  "main": "index.js",
  "scripts": {
    "start": "node server.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Daniel",
  "license": "ISC",
  "dependencies": {
    "express": "^4.17.1"
  }
}
```

Now starting our server is as simple as:

```bash
npm run start
```

Or with `npm start`, which is the only script name that has this alias in NPM.

:::info To Sum Up
Every command written under `scripts` inside `package.json` can be run using:
```bash
npm run <script>
```
:::
